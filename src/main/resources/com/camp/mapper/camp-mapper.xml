<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.camp.mapper.CampMapper">

	<!-- <insert id="insertBoard" 
			parameterType="com.springdemo.bootboard.vo.Board"
			useGeneratedKeys="true" keyColumn="board_idx" keyProperty="boardIdx">
		INSERT INTO t_board
		(
			title, 
			contents, 
			created_datetime,
			creator_id
		)
		VALUES
		(
			#{ title }, 
			#{ contents }, 
			NOW(),
			#{ creatorId }
		)	
	</insert>
	
	<select id="selectBoard" 
			resultType="com.springdemo.bootboard.vo.Board">
		<![CDATA[
		SELECT 
			board_idx,
			title,
			hit_cnt,
			created_datetime
		FROM
			t_board
		WHERE
			deleted_yn = 'n'
		ORDER BY board_idx DESC
		]]> 
	</select> -->		
	
	<select id="selectCampByCampNo" 
			parameterType="int" resultType="com.camp.vo.Camp">
		select 
			CAMPNO,
			CAMPNAME,
			CONTENT,
			PRICE,
			CATEGORY,
			MEMBERID
		from CAMP
		where CAMPNO = #{ CAMPNO }
	</select>
	
	<select id="selectCampFilesByCampNo" parameterType="int" resultType="com.camp.vo.CampFile">
		SELECT CAMPFILENO, SAVEDFILENAME, USERFILENAME, CAMPNO
		FROM CAMPFILE
		WHERE CAMPNO = #{ CAMPNO }
		ORDER BY CAMPNO DESC
	</select>
	
	<select id="getCampList"
		parameterType="hashmap" resultType="com.camp.vo.Camp">
			SELECT *
			FROM CAMP
			ORDER BY CAMPNO DESC
			LIMIT #{pageStart}, #{perPageNum}	
	</select>
	
	<select id="getCampListCnt" resultType="int">
		SELECT count(*)
		FROM CAMP
	</select>
	
	<select id="getCampKindCnt" resultType="int">
		SELECT count(*)
		FROM CAMP
		WHERE category = #{category}
	</select>
	
	<select id="getCampKind"
		parameterType="hashmap" resultType="com.camp.vo.Camp">
			SELECT *
			FROM CAMP
			WHERE category = #{category}
			ORDER BY CAMPNO DESC
	</select>
	
	<!-- <delete id="deleteBoard" parameterType="int">
		UPDATE t_board
		SET
			deleted_yn = 'y',
			updated_datetime = NOW(),
			updater_id = 'current_user'
		WHERE
			board_idx = #{ boardIdx }
	</delete>
	
	<update id="updateBoard" parameterType="com.springdemo.bootboard.vo.Board">
		UPDATE t_board
		SET
			title = #{ title },
			contents = #{ contents },
			updated_datetime = NOW(),
			updater_id = 'current_user'
		WHERE
			board_idx = #{ boardIdx }
	</update>
	
	*************************************************
	
	<insert id="insertBoardFileList" 
			parameterType="com.springdemo.bootboard.vo.BoardFile">
		INSERT INTO t_file
		(
			board_idx,
			original_file_name,
			stored_file_path,
			file_size,
			creator_id,
			created_datetime
		)
		VALUES
		<foreach collection="list" item="item" separator=",">
		(
			#{ item.boardIdx },
			#{ item.originalFileName },
			#{ item.storedFilePath },
			#{ item.fileSize },
			#{ item.creatorId },
			NOW()
		)
		</foreach>
	</insert> -->
	
</mapper>

